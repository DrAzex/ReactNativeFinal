{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useContext } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { AntDesign } from '@expo/vector-icons';\nimport { useCollection } from \"react-firebase-hooks/firestore\";\nimport { Context } from \"../../App\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport PostEdit from \"../PostEdit/PostEdit\";\nimport Loader from \"../Loader/Loader\";\nimport Comments from \"../Comments/Comments\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function HomeScreen() {\n  var _useContext = useContext(Context),\n      firestore = _useContext.firestore,\n      auth = _useContext.auth;\n\n  var _useAuthState = useAuthState(auth),\n      _useAuthState2 = _slicedToArray(_useAuthState, 1),\n      user = _useAuthState2[0];\n\n  var _useCollection = useCollection(firestore.collection('posts').orderBy('createAt')),\n      _useCollection2 = _slicedToArray(_useCollection, 2),\n      messages = _useCollection2[0],\n      loading = _useCollection2[1];\n\n  var Liking = function Liking(m) {\n    if (!m.data().likeSendUsersId.includes(user.uid)) {\n      firestore.doc(m.ref.path).update({\n        'likeCount': m.data().likeCount + 1\n      });\n      firestore.doc(m.ref.path).update({\n        'likeSendUsersId': [].concat(_toConsumableArray(m.data().likeSendUsersId), [user.uid])\n      });\n    } else {\n      firestore.doc(m.ref.path).update({\n        'likeCount': m.data().likeCount - 1\n      });\n      var a = m.data().likeSendUsersId;\n      a.pop(a.indexOf(user.uid));\n      firestore.doc(m.ref.path).update({\n        'likeSendUsersId': _toConsumableArray(a)\n      });\n    }\n  };\n\n  if (loading) {\n    return _jsx(Loader, {});\n  }\n\n  return _jsxs(ScrollView, {\n    style: {\n      backgroundColor: \"#e3e8e4\"\n    },\n    children: [_jsx(PostEdit, {}), messages.docs.map(function (message) {\n      return _jsx(View, {\n        style: {\n          backgroundColor: \"white\",\n          marginTop: 10,\n          marginBottom: 10\n        },\n        children: _jsxs(View, {\n          style: {\n            borderSize: \"30px\",\n            margin: 20\n          },\n          children: [_jsxs(View, {\n            style: style.info,\n            children: [_jsx(Image, {\n              style: style.img,\n              source: {\n                uri: message.data().photoURL,\n                width: 60,\n                height: 60,\n                resizeMode: \"contain\"\n              }\n            }), _jsx(Text, {\n              style: style.textDesign,\n              children: message.data().displayName\n            })]\n          }), _jsxs(View, {\n            children: [_jsx(Text, {\n              style: {\n                marginTop: 10\n              },\n              children: message.data().text\n            }), message.data().img ? _jsx(Image, {\n              style: {\n                marginBottom: 10,\n                marginTop: 10\n              },\n              source: {\n                uri: message.data().img,\n                width: 350,\n                height: 350,\n                defaultSource: 'http://www.dermalina.com/wp-content/uploads/2020/12/no-image.jpg',\n                resizeMode: \"contain\"\n              }\n            }) : _jsx(_Fragment, {})]\n          }), _jsxs(View, {\n            style: style.comments,\n            children: [_jsxs(View, {\n              style: style.like,\n              children: [_jsxs(Text, {\n                children: [\"Likes \", message.data().likeCount]\n              }), _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  return Liking(message);\n                },\n                children: _jsx(AntDesign, {\n                  name: message.data().likeSendUsersId.includes(user.uid) ? 'like1' : 'like2',\n                  size: 24,\n                  color: \"black\"\n                })\n              })]\n            }), _jsx(View, {\n              children: _jsxs(Text, {\n                children: [\"Comment \", message.data().commentCount]\n              })\n            })]\n          }), _jsx(View, {\n            children: _jsx(Comments, {\n              message: message\n            })\n          })]\n        }, message.id)\n      });\n    })]\n  });\n}\nvar style = StyleSheet.create({\n  info: {\n    width: '50%',\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  img: {\n    borderRadius: 50,\n    marginRight: 10\n  },\n  view: {\n    width: '100%',\n    height: 4,\n    backgroundColor: 'black',\n    marginBottom: 10\n  },\n  textDesign: {\n    fontSize: 30\n  },\n  like: {\n    width: 80,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  comments: {\n    width: \"100%\",\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"names":["React","useContext","AntDesign","useCollection","Context","useAuthState","PostEdit","Loader","Comments","HomeScreen","firestore","auth","user","collection","orderBy","messages","loading","Liking","m","data","likeSendUsersId","includes","uid","doc","ref","path","update","likeCount","a","pop","indexOf","backgroundColor","docs","map","message","marginTop","marginBottom","borderSize","margin","style","info","img","uri","photoURL","width","height","resizeMode","textDesign","displayName","text","defaultSource","comments","like","commentCount","id","StyleSheet","create","flex","flexDirection","justifyContent","alignItems","borderRadius","marginRight","view","fontSize"],"sources":["/Users/user/Desktop/ReactNativeFinal/Components/HomeScreen/HomeScreen.js"],"sourcesContent":["import React, {useContext} from 'react';\r\nimport { Text, View, Image, ScrollView, TouchableOpacity, StyleSheet} from 'react-native';\r\nimport { AntDesign } from '@expo/vector-icons';\r\n\r\nimport {useCollection} from \"react-firebase-hooks/firestore\";\r\nimport {Context} from \"../../App\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\n\r\nimport PostEdit from \"../PostEdit/PostEdit\";\r\nimport Loader from \"../Loader/Loader\";\r\nimport Comments from '../Comments/Comments'\r\n\r\nexport default function HomeScreen() {\r\n    const {firestore, auth} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n    const [messages,loading] = useCollection(\r\n        firestore.collection('posts').orderBy('createAt')\r\n    )\r\n    const Liking = (m)=>{\r\n        if(!m.data().likeSendUsersId.includes(user.uid)){\r\n            firestore.doc(m.ref.path).update({'likeCount':m.data().likeCount+1})\r\n            firestore.doc(m.ref.path).update({'likeSendUsersId':[...m.data().likeSendUsersId,user.uid]})\r\n        }\r\n        else{\r\n            firestore.doc(m.ref.path).update({'likeCount':m.data().likeCount-1})\r\n            let a =m.data().likeSendUsersId;\r\n            a.pop(a.indexOf(user.uid))\r\n            firestore.doc(m.ref.path).update({'likeSendUsersId':[...a]})\r\n        }\r\n    }\r\n    if(loading){\r\n        return <Loader />\r\n    }\r\n    return (\r\n        <ScrollView style = {{backgroundColor: \"#e3e8e4\"}}>\r\n            <PostEdit />\r\n                {\r\n                    messages.docs.map(message =>\r\n                    <View style = {{backgroundColor: \"white\", marginTop:10,marginBottom:10}}>\r\n                    <View style={{borderSize:\"30px\",margin:20}} key = {message.id}>\r\n                        <View style = {style.info}>\r\n                            <Image style = {style.img} source={{\r\n                                    uri: message.data().photoURL,\r\n                                    width: 60,\r\n                                    height: 60,\r\n                                    resizeMode:\"contain\",\r\n                            }} />\r\n                            <Text style = {style.textDesign}>{message.data().displayName}</Text>\r\n                        </View>\r\n                        <View>\r\n                            <Text style = {{marginTop:10}}>{message.data().text}</Text>\r\n                            {(message.data().img)? <Image style = {{marginBottom:10,marginTop:10}}source={{\r\n                                uri: message.data().img,\r\n                                width: 350,\r\n                                height: 350,\r\n                                defaultSource : 'http://www.dermalina.com/wp-content/uploads/2020/12/no-image.jpg',\r\n                                resizeMode:\"contain\"\r\n                            }} /> : <></>}\r\n                        </View>\r\n                        <View style = {style.comments}>\r\n                                <View style = {style.like}> \r\n                                <Text>Likes {message.data().likeCount}</Text>\r\n                                <TouchableOpacity onPress={()=> Liking(message)} ><AntDesign  name={(message.data().likeSendUsersId.includes(user.uid))?'like1': 'like2'} size={24} color=\"black\" /></TouchableOpacity>\r\n                                </View>\r\n                                 <View>\r\n                                    <Text>Comment {message.data().commentCount}</Text>    \r\n                                </View>\r\n                                \r\n                            </View>\r\n                            <View>\r\n                                    <Comments message ={message} />\r\n                                </View>\r\n                    </View>\r\n                </View>\r\n                )}\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\nconst style = StyleSheet.create({\r\n    info: {\r\n        width:'50%',\r\n        flex:1,\r\n        flexDirection:'row',\r\n        justifyContent: 'space-between',\r\n        alignItems:'center',\r\n    },\r\n    img: {\r\n        borderRadius:50,\r\n        marginRight:10,\r\n    },\r\n    view: {\r\n        width:'100%',\r\n        height:4,\r\n        backgroundColor:'black',\r\n        marginBottom:10,\r\n    },\r\n    textDesign: {\r\n        fontSize:30,\r\n\r\n    },\r\n    like: {\r\n        width: 80,\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        alignItems:'center',\r\n    },\r\n    comments: {\r\n        width: \"100%\",\r\n        flexDirection: 'row',\r\n        justifyContent:'space-between',\r\n        alignItems:'center',\r\n    },\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}